"use strict";"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),/*! checkboxrange v0.3.0-alpha [03-05-2015] | (c) Rafael Pawlos (http://rafaelpawlos.com) | MIT license */
function(a,b,c){var d="checkboxrange",e="plugin_"+d,f={init:function(b,c,d){var e=this;e.opts=b,e.support=c,e.container=a(d),e.checkboxes=e.container.find('input[type="checkbox"]'),e.container.addClass("checkbox-range-container"),b.noStyle||(e.container.addClass("cr-style"),e.createStyleMask()),c.touch&&b.onTouchLabels&&e.createOnTouchLabels(),e.assembleMarkElements(),e.indexElements(e.checkboxes),e.bindActions(),e.bindShiftKeyHelpers()},bindActions:function(){var d=this;d.bind(d.checkboxes,"mousedown touchstart",d.selectStart),d.bind(a(c),"keydown",d.selectStart),d.bind(a(b),"mouseup touchend",d.clean)},bindShiftKeyHelpers:function(){var b=this;b.bind(b.checkboxes,"mouseup.shift",function(c){b.shiftHold||(b.lastChecked=a(c.target))}),b.bind(a(c),"keyup",function(a){16===a.keyCode&&(b.shiftHold=!1,b.clean())})},selectStart:function(b){var c=this;"touchstart"===b.type&&1!==b.originalEvent.touches.length||!("keydown"!==b.type||16===b.keyCode&&c.lastChecked)||c.shiftHold||("keydown"===b.type&&(c.shiftHold=!0),c.startPoint="keydown"===b.type?c.lastChecked:a(b.target),c.startPointIndex=c.startPoint.data(c.iKey),c.startPointOffLeft=c.startPoint.offset().left,c.startPointOffTop=c.startPoint.offset().top,c.containerOffLeft=c.container.offset().left,c.containerOffTop=c.container.offset().top,c.updateLineStart(),c.startPoint.next().addClass("show"),c.bind(c.container,"mousemove.line touchmove.line",c.moveLine),c.bind(c.container,"mousemove.edge touchmove.edge",c.scrollOnEdge),c.bind(c.container,"touchmove",c.touchDragActions),c.bind(c.checkboxes,"mouseenter touchstart.second",c.dragActions))},dragActions:function(b){var c=this;if("touchstart"===b.type){if(1===b.originalEvent.touches.length)return;c.endPoint=a(b.originalEvent.touches[1].target),c.unbind(c.container,"touchmove"),c.bind(c.container,"touchmove",function(a){a.preventDefault()})}else c.endPoint=a(b.target);c.endPointIndex=c.endPoint.data(c.iKey),c.endPointIndex!==c.startPointIndex&&(c.stopMoveLine=!0,c.magnetToEndPoint(),c.endPoint.next().addClass("show"),c.bind(c.endPoint,"mouseup.select touchend.select",c.toggleCheckboxesRange,!0),c.bind(c.endPoint,"mouseleave touchend",function(b){c.unbind(c.endPoint,"mouseup.select"),b.target!==c.startPoint[0]&&a(b.target).next().removeClass("show"),c.stopMoveLine=!1}))},touchDragActions:function(c){var d=this;c.preventDefault();var e=b.elementFromPoint(c.originalEvent.touches[0].clientX,c.originalEvent.touches[0].clientY);e&&(d.endPoint&&e!==d.endPoint[0]&&d.onTouchLeave&&(d.onTouchLeave=!1,d.endPointIndex!==d.startPointIndex&&d.endPoint.next().removeClass("show"),d.stopMoveLine=!1,d.endPoint=null),d.onTouchLeave||d.endPoint&&e===d.endPoint[0]||e===d.container[0]||e.parentNode!==d.container[0]&&e.parentNode.parentNode!==d.container[0]||(d.endPoint=a(e),d.touchEndBinded||(d.bind(d.checkboxes,"touchend",d.toggleCheckboxesRange),d.touchEndBinded=!0),d.stopMoveLine=!0,d.magnetToEndPoint(),d.endPointIndex=d.endPoint.data(d.iKey),d.endPoint.next().addClass("show"),d.onTouchLeave=!0))},clean:function(a){var b=this;b.shiftHold||(b.container.find(".checkbox-range-point").removeClass("show"),b.svgLine.attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0),b.unbind(b.container,"mousemove"),b.unbind(b.container,"touchmove"),b.unbind(b.checkboxes,"mouseenter"),b.unbind(b.checkboxes,"touchstart.second"),b.touchEndBinded&&setTimeout(function(){b.unbind(b.checkboxes,"touchend"),b.onTouchLeave=!1,b.touchEndBinded=!1},20))},bind:function(a,b,c,e){var f=this,g="."+d;if(/ /.test(b))var h=b.split(" "),i=h.join(g+" ")+g;else var i=b+g;e?a.one(i,function(a){return c.call(f,a)}):a.on(i,function(a){return c.call(f,a)})},unbind:function(a,b){var c=b+"."+d;a.off(c)},indexElements:function(b){var c=this;c.iKey=d+"Index",b.each(function(b){a.data(this,c.iKey,b)})},createStyleMask:function(){var a=this;a.checkboxes.after('<span class="checkbox-mask"></span>')},assembleMarkElements:function(){var c=this;c.checkboxes.after('<span class="checkbox-range-point"></span>'),c.svgCanvas=a('<svg class="checkbox-range-bound-canvas"></svg>'),c.container.append(c.svgCanvas),c.svgLine=a(b.createElementNS("http://www.w3.org/2000/svg","line")),c.svgCanvas.append(c.svgLine)},updateLineStart:function(){var a=this,b=a.startPoint.offset().left-a.containerOffLeft+a.opts.lineOffsetLeft,c=a.startPoint.offset().top-a.containerOffTop+a.opts.lineOffsetTop;a.svgLine.attr("x1",b).attr("y1",c).attr("x2",b).attr("y2",c)},moveLine:function(a){var b=this;if(!b.stopMoveLine){switch(a.type){case"touchmove":var c=a.originalEvent.touches[0].pageX,d=a.originalEvent.touches[0].pageY;break;default:var c=a.pageX,d=a.pageY}switch(b.opts.path){case"horizontal":var e=c-b.containerOffLeft,f=b.startPointOffTop-b.containerOffTop+b.opts.lineOffsetTop;break;case"vertical":var e=b.startPointOffLeft-b.containerOffLeft+b.opts.lineOffsetLeft,f=d-b.containerOffTop;break;case"any":var e=c-b.containerOffLeft,f=d-b.containerOffTop}b.svgLine.attr("x2",e).attr("y2",f)}},scrollOnEdge:function(a){var b=this;switch(a.type){case"touchmove":a.originalEvent.touches[0].clientY<20?b.support.stContainer.scrollTop-=3:a.originalEvent.touches[0].clientY>c.innerHeight-20&&(b.support.stContainer.scrollTop+=3);break;default:a.clientY<20?b.support.stContainer.scrollTop-=5:a.clientY>c.innerHeight-20&&(b.support.stContainer.scrollTop+=5)}},createOnTouchLabels:function(){var b=this;b.checkboxes.each(function(){var b=a(this),c=b.siblings("label")[0]||b.parent("label")[0];if(c){var d=a(c).text();d.length>15&&(d=d.substring(0,14)+"..."),b.parent().append('<span class="ontouch-label">'+d+"</span>")}})},magnetToEndPoint:function(){var a=this,b=a.endPoint.offset().left-a.containerOffLeft+a.opts.lineOffsetLeft,c=a.endPoint.offset().top-a.containerOffTop+a.opts.lineOffsetTop;a.svgLine.attr("x2",b).attr("y2",c)},getElementsRange:function(){var b=this;if(b.startPointIndex>b.endPointIndex){var c=b.startPointIndex;b.startPointIndex=b.endPointIndex,b.endPointIndex=c}if(b.shiftHold){var d=b.startPoint.prop("checked"),e=b.endPoint.prop("checked");if(d&&!e||!d&&e)var f=a();else var f=b.startPoint}else var f=b.startPoint.add(b.endPoint);return b.checkboxes.each(function(a){a>b.startPointIndex&&a<b.endPointIndex&&(f=f.add(b.checkboxes[a]))}),f},toggleCheckboxesRange:function(){var b=this;if(b.endPoint){b.lastChecked=b.endPoint;var c=b.getElementsRange();c.prop("checked",function(){a(this).prop("checked")===!0?a(this).prop("checked",!1):a(this).prop("checked",!0)}),b.opts.onSelectEnd(),b.shiftHold=!1}}};a.fn[d]=function(d){var g=a.extend(!0,{path:"any",noStyle:!1,onTouchLabels:!0,lineOffsetTop:10,lineOffsetLeft:10,onSelectEnd:function(){}},d),h={stContainer:/AppleWebKit/.test(navigator.userAgent)?b.body:b.documentElement,touch:"ontouchstart"in c||c.DocumentTouch&&b instanceof DocumentTouch};return this.each(function(){var b=a.data(this,e);return b?void a.error("Plugin is already initialized for this object."):(b=Object.create(f).init(g,h,this),void a.data(this,e,b))})}}(jQuery,document,window);