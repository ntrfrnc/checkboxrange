"use strict";"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),/*! checkboxrange v0.1.0-alpha [27-04-2015] | (c) Rafael Pawlos (http://rafaelpawlos.com) | MIT license */
function(a,b,c){var d="checkboxrange",e="plugin_"+d,f={init:function(b,c){var d=this;d.opts=b,d.container=a(c),d.checkboxes=d.container.find('input[type="checkbox"]'),d.container.addClass("checkbox-range-container"),d.cleanStart=!0,d.scrollTopContainer=a(/AppleWebKit/.test(navigator.userAgent)?"body":"html"),d.opts.noStyle||(d.container.addClass("cr-style"),d.createStyleMask()),d.indexElements(d.checkboxes),d.bindActions()},bindActions:function(){var c=this;c.bind(c.checkboxes,"mousedown touchstart",function(b){("touchstart"!==b.type||1===b.originalEvent.touches.length)&&(c.startPoint=a(b.target),c.startPointIndex=c.startPoint.data(c.iKey),c.startPointOffLeft=c.startPoint.offset().left,c.startPointOffTop=c.startPoint.offset().top,c.containerOffLeft=c.container.offset().left,c.containerOffTop=c.container.offset().top,c.assembleMarkElements(),c.bind(c.container,"mousemove.move touchmove.move",c.movePointer),c.bind(c.container,"mousemove.edge touchmove.edge",c.scrollOnEdge),c.bind(c.container,"touchmove",c.touchHoverActions),c.bind(c.checkboxes,"mouseenter touchstart.second",c.hoverActions))}),a(b).on("mouseup touchend",function(b){a("#checkbox-range-start, #checkbox-range-bound-canvas, #checkbox-range-stop").remove(),c.unbind(c.container,"mousemove"),c.unbind(c.checkboxes,"mouseenter"),c.unbind(c.checkboxes,"touchstart.second"),c.unbind(c.checkboxes,"touchmove"),c.cleanStart||setTimeout(function(){c.unbind(c.checkboxes,"touchend"),c.onTouchLeave=!1,c.cleanStart=!0},20)})},hoverActions:function(b){var c=this;if("touchstart"===b.type){if(1===b.originalEvent.touches.length)return;c.endPoint=a(b.originalEvent.touches[1].target)}else c.endPoint=a(b.target);c.endPointIndex=c.endPoint.data(c.iKey),c.endPointIndex!==c.startPointIndex&&(c.stopMovePointer=!0,c.magnetToEndPoint(),c.endPoint.after('<span id="checkbox-range-stop"></span>'),c.bind(c.endPoint,"mouseup touchend",c.toggleCheckboxesRange,!0),c.endPoint.one("mouseleave touchend",function(){c.unbind(c.endPoint,"mouseup"),a("#checkbox-range-stop").remove(),c.stopMovePointer=!1}))},touchHoverActions:function(c){var d=this;c.preventDefault();var e=b.elementFromPoint(c.originalEvent.touches[0].clientX,c.originalEvent.touches[0].clientY);e&&(d.endPoint&&e!==d.endPoint[0]&&d.onTouchLeave&&(d.onTouchLeave=!1,a("#checkbox-range-stop").remove(),d.stopMovePointer=!1,d.endPoint=null),d.onTouchLeave||d.endPoint&&e===d.endPoint[0]||e===d.container[0]||e.parentNode!==d.container[0]&&e.parentNode.parentNode!==d.container[0]||(d.endPoint=a(e),d.cleanStart&&(d.bind(d.checkboxes,"touchend",d.toggleCheckboxesRange),d.cleanStart=!1),d.stopMovePointer=!0,d.magnetToEndPoint(),d.endPointIndex=d.endPoint.data(d.iKey),d.endPoint.after('<span id="checkbox-range-stop"></span>'),d.onTouchLeave=!0))},bind:function(a,b,c,e){var f=this,g="."+d;if(/ /.test(b))var h=b.split(" "),i=h.join(g+" ")+g;else var i=b+g;e?a.one(i,function(a){return c.call(f,a)}):a.on(i,function(a){return c.call(f,a)})},unbind:function(a,b){var c=b+"."+d;a.off(c)},indexElements:function(b){var c=this;c.iKey=d+"Index",b.each(function(b){a.data(this,c.iKey,b)})},createStyleMask:function(){var a=this;a.checkboxes.after('<span class="checkbox-mask"></span>')},assembleMarkElements:function(){var a=this,b=a.startPoint.offset().left-a.containerOffLeft+a.opts.lineOffsetLeft,c=a.startPoint.offset().top-a.containerOffTop+a.opts.lineOffsetTop;a.startPoint.after('<span id="checkbox-range-start"></span>'),a.container.append('<svg id="checkbox-range-bound-canvas"><line x1="'+b+'" y1="'+c+'" x2="'+b+'" y2="'+c+'"/></svg>')},movePointer:function(b){var c=this;if(!c.stopMovePointer){switch(b.type){case"touchmove":var d=b.originalEvent.touches[0].pageX,e=b.originalEvent.touches[0].pageY;break;default:var d=b.pageX,e=b.pageY}switch(c.opts.path){case"horizontal":var f=d-c.containerOffLeft,g=c.startPointOffTop-c.containerOffTop+c.opts.lineOffsetTop;break;case"vertical":var f=c.startPointOffLeft-c.containerOffLeft+c.opts.lineOffsetLeft,g=e-c.containerOffTop;break;case"any":var f=d-c.containerOffLeft,g=e-c.containerOffTop}a("#checkbox-range-bound-canvas line").attr("x2",f).attr("y2",g)}},scrollOnEdge:function(a){var b=this;switch(a.type){case"touchmove":a.originalEvent.touches[0].clientY<20?b.scrollTopContainer[0].scrollTop-=1:a.originalEvent.touches[0].clientY>c.innerHeight-20&&(b.scrollTopContainer[0].scrollTop+=1);break;default:a.clientY<20?b.scrollTopContainer[0].scrollTop-=5:a.clientY>c.innerHeight-20&&(b.scrollTopContainer[0].scrollTop+=5)}},magnetToEndPoint:function(){var b=this,c=b.endPoint.offset().left-b.containerOffLeft+b.opts.lineOffsetLeft,d=b.endPoint.offset().top-b.containerOffTop+b.opts.lineOffsetTop;a("#checkbox-range-bound-canvas line").attr("x2",c).attr("y2",d)},getElementsRange:function(){var a=this;if(a.startPointIndex>a.endPointIndex){var b=a.startPointIndex;a.startPointIndex=a.endPointIndex,a.endPointIndex=b}var c=a.startPoint.add(a.endPoint);return a.checkboxes.each(function(b){b>a.startPointIndex&&b<a.endPointIndex&&(c=c.add(a.checkboxes[b]))}),c},toggleCheckboxesRange:function(){var b=this;if(b.endPoint){var c=b.getElementsRange();c.prop("checked",function(){a(this).prop("checked")===!0?a(this).prop("checked",!1):a(this).prop("checked",!0)}),b.opts.onSelectEnd()}}};a.fn[d]=function(b){var c=a.extend(!0,{path:"any",noStyle:!1,lineOffsetTop:10,lineOffsetLeft:10,onSelectEnd:function(){}},b);return this.each(function(){var b=a.data(this,e);return b?void a.error("Plugin is already initialized for this object."):(b=Object.create(f).init(c,this),void a.data(this,e,b))})}}(jQuery,document,window);