"use strict";"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),/*! checkboxrange v0.2.0-alpha [03-05-2015] | (c) Rafael Pawlos (http://rafaelpawlos.com) | MIT license */
function(a,b,c){var d="checkboxrange",e="plugin_"+d,f={init:function(b,c){var d=this;d.opts=b,d.container=a(c),d.checkboxes=d.container.find('input[type="checkbox"]'),d.container.addClass("checkbox-range-container"),d.cleanStart=!0,d.scrollTopContainer=a(/AppleWebKit/.test(navigator.userAgent)?"body":"html"),d.opts.noStyle||(d.container.addClass("cr-style"),d.createStyleMask()),d.assembleMarkElements(),d.indexElements(d.checkboxes),d.bindActions()},bindActions:function(){var c=this;c.bind(c.checkboxes,"mousedown touchstart",function(b){("touchstart"!==b.type||1===b.originalEvent.touches.length)&&(c.startPoint=a(b.target),c.startPointIndex=c.startPoint.data(c.iKey),c.startPointOffLeft=c.startPoint.offset().left,c.startPointOffTop=c.startPoint.offset().top,c.containerOffLeft=c.container.offset().left,c.containerOffTop=c.container.offset().top,c.updateLineStart(),c.startPoint.next()[0].style.visibility="visible",c.bind(c.container,"mousemove.line touchmove.line",c.moveLine),c.bind(c.container,"mousemove.edge touchmove.edge",c.scrollOnEdge),c.bind(c.container,"touchmove",c.touchDragActions),c.bind(c.checkboxes,"mouseenter touchstart.second",c.hoverActions))}),c.bind(a(b),"mouseup touchend",c.clean)},hoverActions:function(b){var c=this;if("touchstart"===b.type){if(1===b.originalEvent.touches.length)return;c.endPoint=a(b.originalEvent.touches[1].target)}else c.endPoint=a(b.target);c.endPointIndex=c.endPoint.data(c.iKey),c.endPointIndex!==c.startPointIndex&&(c.stopMoveLine=!0,c.magnetToEndPoint(),c.endPoint.next()[0].style.visibility="visible",c.bind(c.endPoint,"mouseup touchend",c.toggleCheckboxesRange,!0),c.bind(c.endPoint,"mouseleave touchend",function(b){c.unbind(c.endPoint,"mouseup"),b.target!==c.startPoint[0]&&(a(b.target).next()[0].style.visibility="hidden"),c.stopMoveLine=!1}))},touchDragActions:function(c){var d=this;c.preventDefault();var e=b.elementFromPoint(c.originalEvent.touches[0].clientX,c.originalEvent.touches[0].clientY);e&&(d.endPoint&&e!==d.endPoint[0]&&d.onTouchLeave&&(d.onTouchLeave=!1,d.endPointIndex!==d.startPointIndex&&(d.endPoint.next()[0].style.visibility="hidden"),d.stopMoveLine=!1,d.endPoint=null),d.onTouchLeave||d.endPoint&&e===d.endPoint[0]||e===d.container[0]||e.parentNode!==d.container[0]&&e.parentNode.parentNode!==d.container[0]||(d.endPoint=a(e),d.cleanStart&&(d.bind(d.checkboxes,"touchend",d.toggleCheckboxesRange),d.cleanStart=!1),d.stopMoveLine=!0,d.magnetToEndPoint(),d.endPointIndex=d.endPoint.data(d.iKey),d.endPoint.next()[0].style.visibility="visible",d.onTouchLeave=!0))},clean:function(a){var b=this;b.container.find(".checkbox-range-point").css({visibility:"hidden"}),b.svgLine.attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0),b.unbind(b.container,"mousemove"),b.unbind(b.container,"touchmove"),b.unbind(b.checkboxes,"mouseenter"),b.unbind(b.checkboxes,"touchstart.second"),b.cleanStart||setTimeout(function(){b.unbind(b.checkboxes,"touchend"),b.onTouchLeave=!1,b.cleanStart=!0},20)},bind:function(a,b,c,e){var f=this,g="."+d;if(/ /.test(b))var h=b.split(" "),i=h.join(g+" ")+g;else var i=b+g;e?a.one(i,function(a){return c.call(f,a)}):a.on(i,function(a){return c.call(f,a)})},unbind:function(a,b){var c=b+"."+d;a.off(c)},indexElements:function(b){var c=this;c.iKey=d+"Index",b.each(function(b){a.data(this,c.iKey,b)})},createStyleMask:function(){var a=this;a.checkboxes.after('<span class="checkbox-mask"></span>')},assembleMarkElements:function(){var c=this;c.checkboxes.after('<span class="checkbox-range-point"></span>'),c.svgCanvas=a('<svg class="checkbox-range-bound-canvas"></svg>'),c.container.append(c.svgCanvas),c.svgLine=a(b.createElementNS("http://www.w3.org/2000/svg","line")),c.svgCanvas.append(c.svgLine)},updateLineStart:function(){var a=this,b=a.startPoint.offset().left-a.containerOffLeft+a.opts.lineOffsetLeft,c=a.startPoint.offset().top-a.containerOffTop+a.opts.lineOffsetTop;a.svgLine.attr("x1",b).attr("y1",c).attr("x2",b).attr("y2",c)},moveLine:function(a){var b=this;if(!b.stopMoveLine){switch(a.type){case"touchmove":var c=a.originalEvent.touches[0].pageX,d=a.originalEvent.touches[0].pageY;break;default:var c=a.pageX,d=a.pageY}switch(b.opts.path){case"horizontal":var e=c-b.containerOffLeft,f=b.startPointOffTop-b.containerOffTop+b.opts.lineOffsetTop;break;case"vertical":var e=b.startPointOffLeft-b.containerOffLeft+b.opts.lineOffsetLeft,f=d-b.containerOffTop;break;case"any":var e=c-b.containerOffLeft,f=d-b.containerOffTop}b.svgLine.attr("x2",e).attr("y2",f)}},scrollOnEdge:function(a){var b=this;switch(a.type){case"touchmove":a.originalEvent.touches[0].clientY<20?b.scrollTopContainer[0].scrollTop-=3:a.originalEvent.touches[0].clientY>c.innerHeight-20&&(b.scrollTopContainer[0].scrollTop+=3);break;default:a.clientY<20?b.scrollTopContainer[0].scrollTop-=5:a.clientY>c.innerHeight-20&&(b.scrollTopContainer[0].scrollTop+=5)}},magnetToEndPoint:function(){var a=this,b=a.endPoint.offset().left-a.containerOffLeft+a.opts.lineOffsetLeft,c=a.endPoint.offset().top-a.containerOffTop+a.opts.lineOffsetTop;a.svgLine.attr("x2",b).attr("y2",c)},getElementsRange:function(){var a=this;if(a.startPointIndex>a.endPointIndex){var b=a.startPointIndex;a.startPointIndex=a.endPointIndex,a.endPointIndex=b}var c=a.startPoint.add(a.endPoint);return a.checkboxes.each(function(b){b>a.startPointIndex&&b<a.endPointIndex&&(c=c.add(a.checkboxes[b]))}),c},toggleCheckboxesRange:function(){var b=this;if(b.endPoint){var c=b.getElementsRange();c.prop("checked",function(){a(this).prop("checked")===!0?a(this).prop("checked",!1):a(this).prop("checked",!0)}),b.opts.onSelectEnd()}}};a.fn[d]=function(b){var c=a.extend(!0,{path:"any",noStyle:!1,lineOffsetTop:10,lineOffsetLeft:10,onSelectEnd:function(){}},b);return this.each(function(){var b=a.data(this,e);return b?void a.error("Plugin is already initialized for this object."):(b=Object.create(f).init(c,this),void a.data(this,e,b))})}}(jQuery,document,window);